@page "/"
@using Rummy.Client.Services
@using System.Drawing
@inject AuthService AuthService
@inject ChatService ChatService
@inject Microsoft.AspNetCore.Blazor.Services.IUriHelper UriHelper
@*<SurveyPrompt Title="How is Blazor working for you?" />*@

<button class="btn btn-primary" type="button" onclick="@JoinRoomAction">Join Room</button>
<button class="btn btn-primary" type="button" onclick="@CreateRoomAction">Create Room</button>

@functions{
    string username;
    bool firstRender = true;

    protected override async Task OnInitAsync()
    {
        await ChatService.StartAsync();
    }

    protected override async Task OnAfterRenderAsync()
    {
        if (firstRender)
        {
            firstRender = false;

            await JSRuntime.Current.InvokeAsync<bool>("cropImage", 2, 2);
            await JSRuntime.Current.InvokeAsync<bool>("cropImage", 4, 2);

        }

    }

    void JoinRoomAction()
    {
        UriHelper.NavigateTo("rooms");
    }

    void CreateRoomAction()
    {
        UriHelper.NavigateTo("createRoom");
    }
}

